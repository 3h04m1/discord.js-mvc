import{_ as r,r as p,o as l,c as u,b as s,d as a,w as e,e as n,a as o}from"./app-ab3f265b.js";const d={},k=o('<h1 id="routing" tabindex="-1"><a class="header-anchor" href="#routing" aria-hidden="true">#</a> Routing</h1><p>For routing, <code>discord.js-mvc</code> provides 3 built-in helper-classes:</p><ul><li><code>Router</code> - This class is used to create a new router.</li><li><code>Route</code> - This class is used to create a new route.</li><li><code>RouteManager</code> - This class is used to manage routes and create route groups.</li></ul><p>Here you will find everything you need to know about routing:</p>',4),m={class:"table-of-contents"},h=o(`<hr><h2 id="route" tabindex="-1"><a class="header-anchor" href="#route" aria-hidden="true">#</a> Route</h2><p>The <code>Route</code> class is used to create a new route. By itself, it doesn&#39;t do anything, but it is used by the <code>Router</code> class to create routes. The <code>Route</code> class has 1 generic type that represents the type of the context.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>        <span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ChatInputCommandInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;Pong!&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It also has 2 properties:</p><ul><li><code>name</code> - The name of the route.</li><li><code>controller</code> - The controller function of the route. This function will be executed when the route is triggered.</li></ul><h3 id="controller" tabindex="-1"><a class="header-anchor" href="#controller" aria-hidden="true">#</a> Controller</h3><p>The controller function is a function that will be executed when the route is triggered It can be an anonymous function or a function that you create in a separate file.</p><h4 id="anonymous-function" tabindex="-1"><a class="header-anchor" href="#anonymous-function" aria-hidden="true">#</a> Anonymous function</h4><p>As mentioned before, this method is not recommended since is not maintainable and in the future, you will have a hard time finding the controller function of a specific route.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>        <span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ChatInputCommandInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;Pong!&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="separate-file" tabindex="-1"><a class="header-anchor" href="#separate-file" aria-hidden="true">#</a> Separate file</h4><p>This method is recommended as it is more maintainable and you can easily reuse the controller function in other routes.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// controllers/ping.controller.ts</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>Controller<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;discord.js-mvc&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ChatInputCommandInteraction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;discord.js&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../context&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pingController<span class="token operator">:</span> Controller<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ChatInputCommandInteraction<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;Pong!&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="route-parameters" tabindex="-1"><a class="header-anchor" href="#route-parameters" aria-hidden="true">#</a> Route parameters</h3>`,15),v={href:"https://expressjs.com/en/guide/routing.html",target:"_blank",rel:"noopener noreferrer"},g=s("code",null,":",-1),w=o(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ButtonInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;post/like/:id&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> params <span class="token punctuation">}</span> <span class="token operator">=</span> ctx <span class="token comment">// or you can use ctx.params</span>
    <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">You liked post with id </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="why-do-we-need-route-parameters" tabindex="-1"><a class="header-anchor" href="#why-do-we-need-route-parameters" aria-hidden="true">#</a> Why do we need route parameters?</h4><p>This is very useful when you have some components that are targeting some specific data. This way you can pass the data in the route parameters and use it in the controller function.</p><div class="hint-container warning"><p class="hint-container-title">Note</p><p>Keep in mind that customId of the components can&#39;t be longer than 100 characters. So you have to keep the route parameters short.</p></div><h3 id="route-middleware" tabindex="-1"><a class="header-anchor" href="#route-middleware" aria-hidden="true">#</a> Route middleware</h3><p>You can add middleware for every single route. The middleware will be executed before the controller function.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ButtonInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;pong&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middleware1<span class="token punctuation">,</span> middleware2<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),y=o(`<h2 id="router" tabindex="-1"><a class="header-anchor" href="#router" aria-hidden="true">#</a> Router</h2><p>The <code>Router</code> class is used to create a new router.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Router<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;discord.js-mvc&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ChatInputCommandInteraction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;discord.js&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;.context&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="adding-a-route" tabindex="-1"><a class="header-anchor" href="#adding-a-route" aria-hidden="true">#</a> Adding a route</h3>`,4),b=s("code",null,"add",-1),f=s("code",null,"add",-1),x=s("code",null,"CommandInteraction",-1),_=o(`<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Router<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;discord.js-mvc&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ChatInputCommandInteraction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;discord.js&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;.context&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ChatInputCommandInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">await</span> ctx<span class="token punctuation">.</span>interaction<span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token string">&#39;Pong!&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// ... more routes</span>
    <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="adding-a-route-group" tabindex="-1"><a class="header-anchor" href="#adding-a-route-group" aria-hidden="true">#</a> Adding a route group</h3><p>The route group is a group of routes that share some common properties. Most of the time, you will share the middleware between the routes of the same group. Also, in some cases, you can share a prefix for the routes of the same group. (eg. For buttons, you can share the customId prefix for the routes of the same group)</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
        Router<span class="token punctuation">.</span>manager<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            middleware<span class="token operator">:</span> <span class="token punctuation">[</span>middleware1<span class="token punctuation">,</span> middleware2<span class="token punctuation">]</span><span class="token punctuation">,</span>
            prefix<span class="token operator">:</span> <span class="token string">&#39;prefix.&#39;</span><span class="token punctuation">,</span>
            routes<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ButtonInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;route1&#39;</span><span class="token punctuation">,</span> controller1<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ButtonInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;route2&#39;</span><span class="token punctuation">,</span> controller2<span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>customId</code> of the routes will be <code>prefix.route1</code> and <code>prefix.route2</code>. This is useful when you have 3 buttons in the same action row and you want to name them according to their function.</p><p>Also there is a chance that you will have a button with the same name in another action row, so you can use the prefix to differentiate between them.</p><h4 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h4><p>Let&#39;s say you have a button to play a song, a button to pause a song, and a button to stop a song. You can create a route group for these 3 buttons and name them <code>play</code>, <code>pause</code>, and <code>stop</code> respectively. There is a chance that you will have a button with the same name in another action row, so you can use the prefix to differentiate between them. This way you can name the buttons <code>music.play</code>, <code>music.pause</code>, and <code>music.stop</code> respectively.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>Router<span class="token punctuation">.</span>manager<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    middleware<span class="token operator">:</span> <span class="token punctuation">[</span>middleware1<span class="token punctuation">,</span> middleware2<span class="token punctuation">]</span><span class="token punctuation">,</span>
    prefix<span class="token operator">:</span> <span class="token string">&#39;music.&#39;</span><span class="token punctuation">,</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ButtonInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;play&#39;</span><span class="token punctuation">,</span> playController<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ButtonInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;pause&#39;</span><span class="token punctuation">,</span> pauseController<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">Route<span class="token operator">&lt;</span>Context<span class="token operator">&lt;</span>ButtonInteraction<span class="token operator">&gt;&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;stop&#39;</span><span class="token punctuation">,</span> stopController<span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="router-middleware" tabindex="-1"><a class="header-anchor" href="#router-middleware" aria-hidden="true">#</a> Router middleware</h3><p>You can add middleware to the router using the <code>use</code> method. The middleware will be executed before any route.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>router<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middleware1<span class="token punctuation">,</span> middleware2<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,12);function R(C,I){const t=p("router-link"),i=p("ExternalLinkIcon"),c=p("RouterLink");return l(),u("div",null,[k,s("nav",m,[s("ul",null,[s("li",null,[a(t,{to:"#route"},{default:e(()=>[n("Route")]),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#controller"},{default:e(()=>[n("Controller")]),_:1})]),s("li",null,[a(t,{to:"#route-parameters"},{default:e(()=>[n("Route parameters")]),_:1})]),s("li",null,[a(t,{to:"#route-middleware"},{default:e(()=>[n("Route middleware")]),_:1})])])]),s("li",null,[a(t,{to:"#router"},{default:e(()=>[n("Router")]),_:1}),s("ul",null,[s("li",null,[a(t,{to:"#adding-a-route"},{default:e(()=>[n("Adding a route")]),_:1})]),s("li",null,[a(t,{to:"#adding-a-route-group"},{default:e(()=>[n("Adding a route group")]),_:1})]),s("li",null,[a(t,{to:"#router-middleware"},{default:e(()=>[n("Router middleware")]),_:1})])])])])]),h,s("p",null,[n("Adding parameters to the route is the same as in "),s("a",v,[n("express"),a(i)]),n(". You can add parameters to the route by adding a colon "),g,n(" before the parameter name. When adding parameters to the route, you have to add them to the controller function as well.")]),w,s("p",null,[n("This is useful when you want to add some middleware to a specific route. Like checking if the user is an admin or not. For more information about middleware, check "),a(c,{to:"/guide/getting-started/middleware.html"},{default:e(()=>[n("Middleware")]),_:1}),n(".")]),y,s("p",null,[n("To add one or more routes to the router, you can use the "),b,n(" method. The Router class has a generic type that represents the type of the interaction so you can use it to type the interaction of the routes. Also for controller, you can write an anonymous function, or as shown in "),a(c,{to:"/guide/getting-started/"},{default:e(()=>[n("Ping Pong Example")]),_:1}),n(", you can create a controller function and pass it to the "),f,n(" method. For this example, we will use an anonymous function with the "),x,n(" type.")]),_])}const B=r(d,[["render",R],["__file","routing.html.vue"]]);export{B as default};
